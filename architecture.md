# AI科技新闻通知软件架构设计

## 1. 整体架构

该软件采用模块化设计，主要包含以下几个核心模块：

### 1.1 用户界面模块
负责提供简约风格的图形界面，包括新闻展示区、历史记录区和控制区。

### 1.2 新闻获取模块
负责从多个科技和AI新闻源获取最新信息，解析和过滤相关内容。

### 1.3 数据存储模块
负责将获取的新闻和用户设置保存到本地，支持历史记录查询。

### 1.4 通知模块
负责将新闻内容以Windows 11通知的形式展示给用户。

## 2. 技术选型

### 2.1 开发语言和框架
- 主要语言：Python 3.9+
- GUI框架：PyQt6（提供现代、简约的界面设计）
- 数据存储：SQLite（轻量级数据库，无需额外安装）
- 通知系统：win10toast_click（支持Windows 10/11通知，可点击）

### 2.2 第三方库
- requests：用于HTTP请求
- beautifulsoup4：用于网页解析
- feedparser：用于RSS订阅源解析
- pyinstaller：用于打包可执行文件

## 3. 数据结构设计

### 3.1 新闻数据结构
```python
class NewsItem:
    id: str  # 唯一标识
    title: str  # 新闻标题
    link: str  # 新闻链接
    source: str  # 新闻来源
    published_time: datetime  # 发布时间
    category: str  # 分类（AI、科技等）
    is_read: bool  # 是否已读
```

### 3.2 数据库表设计
- news_items：存储新闻条目
- settings：存储用户设置
- sources：存储新闻来源配置

## 4. 模块详细设计

### 4.1 用户界面模块
- 主窗口：简约设计，包含标题栏和三个主要区域
- 新闻列表区：显示最新获取的新闻标题和来源
- 历史记录区：显示已保存的历史新闻，支持筛选和搜索
- 控制区：包含刷新按钮、设置按钮等

### 4.2 新闻获取模块
- NewsAPI接口：调用免费新闻API获取最新科技和AI新闻
- RSS解析器：解析科技和AI领域的RSS订阅源
- 网页爬虫：针对特定科技网站的内容爬取（备选方案）
- 数据过滤器：根据关键词过滤相关内容

### 4.3 数据存储模块
- 数据库管理器：处理SQLite数据库的连接和查询
- 配置管理器：处理用户设置的保存和加载
- 历史记录管理器：管理历史新闻的存储和检索

### 4.4 通知模块
- 通知管理器：创建和显示Windows通知
- 事件处理器：处理通知点击事件，打开相关链接
- 样式管理器：自定义通知的外观样式

## 5. 工作流程

1. 应用启动时，加载用户设置和历史记录
2. 用户点击刷新按钮，触发新闻获取模块
3. 新闻获取模块从多个来源获取最新新闻
4. 数据过滤器筛选出AI和科技相关的新闻
5. 数据存储模块将新闻保存到本地数据库
6. 通知模块将新获取的新闻以通知形式展示
7. 用户界面同时更新显示最新新闻列表
8. 用户可点击通知或列表项查看详细内容
9. 历史记录模块记录用户的阅读历史

## 6. 扩展性考虑

- 插件系统：预留插件接口，支持未来添加更多新闻源
- 主题系统：支持用户自定义界面主题和样式
- 云同步：预留云端同步接口，支持未来多设备同步

## 7. 兼容性考虑

- 确保在Windows 10和Windows 11系统上正常运行
- 适配不同分辨率和DPI设置的显示器
- 支持Windows深色/浅色模式自动切换
